---
title: Миграция с Vuex 0.6.x на 1.0
type: guide
order: 703
---

> Состоялся релиз Vuex 2.0, но эта инструкция покрывает только миграцию на 1.0? Это опечатка? Кроме того, похоже, что Vuex 1.0 и 2.0 были выпущены одновременно. Что происходит? Какую из версий я должен использовать и какая из них совместима с Vue 2.0?

Обе версии Vuex 1.0 и 2.0:

- полностью совместимы с Vue 1.0 и 2.0
- будут поддерживаться в обозримом будущем

Однако, они имеют различные целевые аудитории.

__Vuex 2.0__ радикально переписан и имеет упрощённый API, для тех, кто начинает новые проекты или хочет быть на острие прогресса в области управления состоянием фронтенд-приложений. __Он не покрывается данной инструкцией по миграции__, поэтому если вы хотите узнать о нём больше — обратитесь к [документации Vuex 2.0](https://v3.vuex.vuejs.org/ru/).

__Vuex 1.0__ в основном обратно совместим, поэтому требует внесения довольно незначительных изменений при обновлении. Рекомендуется для тех, кто уже имеет дело с большими проектами, либо для тех, кто просто хочет постепенно обновиться до Vue 2.0. Данное руководство призвано содействовать этому процессу, но включает в себя только заметки по миграции. Для изучения полного руководство по использованию обратитесь к [документации Vuex 1.0](https://github.com/vuejs/vuex/tree/1.0/docs/en).

## `store.watch` со строковым параметром <sup>заменено</sup>

`store.watch` теперь принимает в качестве аргумента только функции. Например, вы должны заменить:

```js
store.watch('user.notifications', callback)
```

на:

```js
store.watch(
  // Когда возвращаемый результат изменится...
  function (state) {
    return state.user.notifications
  },
  // Запустится коллбэк
  callback
)
```

Это даёт более полный контроль над отслеживанием реактивных свойств.

{% raw %}
<div class="upgrade-path">
  <h4>Обновление</h4>
  <p>Запустите <a href="https://github.com/vuejs/vue-migration-helper">миграционный помощник</a> в вашем проекте, чтобы найти использование <code>store.watch</code> со строкой в качестве первого аргумента.</p>
</div>
{% endraw %}

## Вызов событий из хранилища <sup>удалено</sup>

Экземпляр хранилища больше не предоставляет интерфейс вызова событий (`on`,` off`, `emit`). Если вы ранее использовали хранилище в качестве глобальной шины событий - [см. этот раздел](migration.html#dispatch-and-broadcast-removed) инструкций по миграции.

Вместо того чтобы использовать этот интерфейс для отслеживания событий, пробрасываемых самим хранилищем (например, `store.on('mutation', callback)`), представлен новый метод - `store.subscribe`. Типичное использование в плагине выглядит как:

```js
var myPlugin = store => {
  store.subscribe(function (mutation, state) {
    // Дальнейшие действия...
  })
}

```

Обратитесь к [документации по плагинам](https://github.com/vuejs/vuex/blob/1.0/docs/en/plugins.md) для большей информации.

{% raw %}
<div class="upgrade-path">
  <h4>Обновление</h4>
  <p>Запустите <a href="https://github.com/vuejs/vue-migration-helper">миграционный помощник</a> в вашем проекте, чтобы найти использование <code>store.on</code>, <code>store.off</code> и <code>store.emit</code>.</p>
</div>
{% endraw %}

## Прослойки <sup>заменено</sup>

Прослойки заменены плагинами. Плагин представляет собой обычную функцию, которая получает хранилище в качестве единственного аргумента и может слушать событие мутации в хранилище:

```js
const myPlugins = store => {
  store.subscribe('mutation', (mutation, state) => {
    // Дальнейшие действия...
  })
}
```

Для более детального изучения см. [документацию по плагинам](https://github.com/vuejs/vuex/blob/1.0/docs/en/plugins.md).

{% raw %}
<div class="upgrade-path">
  <h4>Обновление</h4>
  <p>Запустите <a href="https://github.com/vuejs/vue-migration-helper">миграционный помощник</a> в вашем проекте, чтобы найти использование <code>middlewares</code> в вашем хранилище.</p>
</div>
{% endraw %}
